import{d as k,f as _,k as C,u as F,a as X,j as e,C as p}from"./app-D4W3MpZu.js";import{u as D,B as q}from"./use-locale-BGZprsII.js";import{c,C as i,a as u,b as x,d as M}from"./card-Db843UY4.js";import{I as l}from"./input-BcDaJm_2.js";import{L as d}from"./label-Bjye8ax4.js";import{S}from"./spinner-CD5hp5w_.js";import{S as L}from"./layout-RbzPKTvX.js";import{C as f}from"./credit-card-DUnaTsXm.js";import{U as j}from"./user-DiwRUx9W.js";import{P as B}from"./phone-B-eIpH9f.js";import{M as I}from"./mail-Cv5EdxUh.js";import{M as P,B as E}from"./message-circle-r_CITr-G.js";import{M as N}from"./map-pin-BOP3KPf7.js";import{F as T}from"./file-text-j60E73MQ.js";import{S as h}from"./shopping-bag-BpdLKSog.js";/* empty css            */import"./loader-circle-xw1DY77_.js";import"./language-switcher-DLiA4sBK.js";import"./index-DfatcoaU.js";import"./store-logo-Dx1Nit73.js";import"./index-qBq75qjq.js";const z=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],U=k("Lock",z);function me({meals:b=[]}){const{t:a,locale:v}=D(),{auth:w}=_().props,m=w.user,n=C(),s=F({customer:{name:m?.name??"",phone:m?.mobile??"",email:m?.email??"",whatsapp_number:m?.mobile??"",locale:v},delivery_address:"",delivery_city:"",delivery_notes:"",items:n.items.length>0?n.items.map(r=>({meal_id:r.meal_id,quantity:r.quantity})):[{meal_id:b[0]?.id??null,quantity:1}]});X.useEffect(()=>{n.items.length&&s.setData("items",n.items.map(r=>({meal_id:r.meal_id,quantity:r.quantity})))},[n.items.length]);const y=r=>{r.preventDefault(),s.post("/checkout",{onSuccess:()=>n.clear()})},o=s.data.items.map(r=>({...r,meal:b.find(t=>t.id===r.meal_id)})),g=o.reduce((r,t)=>t.meal?r+t.quantity*Number(t.meal.price??0):r,0);return e.jsx(L,{title:a("checkout"),children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-amber-400 to-orange-500 text-white shadow-lg",children:e.jsx(f,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:a("checkout")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("complete_your_order")})]})]}),e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-5",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsxs(c,{className:"overflow-hidden border-0 bg-white/80 shadow-xl backdrop-blur-sm dark:bg-neutral-900/80",children:[e.jsx(i,{className:"border-b border-neutral-200/50 bg-gradient-to-r from-amber-50/80 to-orange-50/80 dark:border-neutral-700/50 dark:from-neutral-800/80 dark:to-neutral-800/50",children:e.jsxs(u,{className:"flex items-center gap-2 text-lg",children:[e.jsx(j,{className:"h-5 w-5 text-amber-600"}),a("contact_information")]})}),e.jsxs(x,{className:"grid gap-5 p-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"customer.name",className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(j,{className:"h-4 w-4 text-amber-500"}),a("name")]}),e.jsx(l,{id:"customer.name",value:s.data.customer.name,onChange:r=>s.setData("customer",{...s.data.customer,name:r.target.value}),className:"border-neutral-300 bg-white/50 focus:border-amber-500 focus:ring-amber-500 dark:border-neutral-600 dark:bg-neutral-800/50",placeholder:a("enter_your_name")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"customer.phone",className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(B,{className:"h-4 w-4 text-amber-500"}),a("phone")]}),e.jsx(l,{id:"customer.phone",value:s.data.customer.phone,onChange:r=>s.setData("customer",{...s.data.customer,phone:r.target.value}),className:"border-neutral-300 bg-white/50 focus:border-amber-500 focus:ring-amber-500 dark:border-neutral-600 dark:bg-neutral-800/50",placeholder:"+965 XXXX XXXX"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"customer.email",className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(I,{className:"h-4 w-4 text-amber-500"}),a("email_address")]}),e.jsx(l,{id:"customer.email",type:"email",value:s.data.customer.email,onChange:r=>s.setData("customer",{...s.data.customer,email:r.target.value}),className:"border-neutral-300 bg-white/50 focus:border-amber-500 focus:ring-amber-500 dark:border-neutral-600 dark:bg-neutral-800/50",placeholder:"you@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"customer.whatsapp",className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(P,{className:"h-4 w-4 text-green-500"}),a("whatsapp_number")]}),e.jsx(l,{id:"customer.whatsapp",value:s.data.customer.whatsapp_number,onChange:r=>s.setData("customer",{...s.data.customer,whatsapp_number:r.target.value}),className:"border-neutral-300 bg-white/50 focus:border-amber-500 focus:ring-amber-500 dark:border-neutral-600 dark:bg-neutral-800/50",placeholder:"+965 XXXX XXXX"})]})]})]}),e.jsxs(c,{className:"overflow-hidden border-0 bg-white/80 shadow-xl backdrop-blur-sm dark:bg-neutral-900/80",children:[e.jsx(i,{className:"border-b border-neutral-200/50 bg-gradient-to-r from-amber-50/80 to-orange-50/80 dark:border-neutral-700/50 dark:from-neutral-800/80 dark:to-neutral-800/50",children:e.jsxs(u,{className:"flex items-center gap-2 text-lg",children:[e.jsx(N,{className:"h-5 w-5 text-amber-600"}),a("delivery_information")]})}),e.jsxs(x,{className:"grid gap-5 p-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(d,{htmlFor:"delivery_address",className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(N,{className:"h-4 w-4 text-amber-500"}),a("address")]}),e.jsx(l,{id:"delivery_address",value:s.data.delivery_address,onChange:r=>s.setData("delivery_address",r.target.value),className:"border-neutral-300 bg-white/50 focus:border-amber-500 focus:ring-amber-500 dark:border-neutral-600 dark:bg-neutral-800/50",placeholder:a("enter_your_address")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"delivery_city",className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(E,{className:"h-4 w-4 text-amber-500"}),a("city")]}),e.jsx(l,{id:"delivery_city",value:s.data.delivery_city,onChange:r=>s.setData("delivery_city",r.target.value),className:"border-neutral-300 bg-white/50 focus:border-amber-500 focus:ring-amber-500 dark:border-neutral-600 dark:bg-neutral-800/50",placeholder:a("enter_city")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"delivery_notes",className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(T,{className:"h-4 w-4 text-amber-500"}),a("notes")]}),e.jsx(l,{id:"delivery_notes",value:s.data.delivery_notes,onChange:r=>s.setData("delivery_notes",r.target.value),className:"border-neutral-300 bg-white/50 focus:border-amber-500 focus:ring-amber-500 dark:border-neutral-600 dark:bg-neutral-800/50",placeholder:a("special_instructions")})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"sticky top-24 space-y-6",children:[o.length>0&&e.jsxs(c,{className:"overflow-hidden border-0 bg-white/80 shadow-xl backdrop-blur-sm dark:bg-neutral-900/80",children:[e.jsx(i,{className:"border-b border-neutral-200/50 bg-gradient-to-r from-amber-50/80 to-orange-50/80 dark:border-neutral-700/50 dark:from-neutral-800/80 dark:to-neutral-800/50",children:e.jsxs(u,{className:"flex items-center gap-2 text-lg",children:[e.jsx(h,{className:"h-5 w-5 text-amber-600"}),a("order_summary")]})}),e.jsx(x,{className:"divide-y divide-neutral-200/50 p-0 dark:divide-neutral-700/50",children:o.map((r,t)=>r.meal?e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[r.meal.image_url&&e.jsx("div",{className:"relative h-16 w-16 flex-shrink-0 overflow-hidden rounded-xl bg-neutral-100 shadow-md dark:bg-neutral-800",children:e.jsx("img",{src:r.meal.image_url,alt:r.meal.name,className:"h-full w-full object-cover"})}),!r.meal.image_url&&e.jsx("div",{className:"flex h-16 w-16 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30",children:e.jsx(h,{className:"h-6 w-6 text-amber-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-neutral-900 dark:text-white truncate",children:r.meal.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"inline-flex items-center rounded-full bg-amber-100 px-2 py-0.5 text-xs font-medium text-amber-800 dark:bg-amber-900/50 dark:text-amber-300",children:["x",r.quantity]}),e.jsxs("span",{children:["@ ",Number(r.meal.price).toFixed(2)," ",a("currency_code")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-neutral-900 dark:text-white",children:(r.quantity*r.meal.price).toFixed(2)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("currency_code")})]})]},t):null)}),e.jsxs(M,{className:"flex flex-col gap-4 border-t border-neutral-200/50 bg-neutral-50/50 p-6 dark:border-neutral-700/50 dark:bg-neutral-800/30",children:[e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:a("order_total")}),e.jsxs("span",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:[g.toFixed(2)," ",a("currency_code")]})]}),e.jsx(q,{type:"submit",disabled:s.processing,className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 py-6 text-base font-semibold text-white shadow-lg transition-all hover:from-amber-600 hover:to-orange-600 hover:shadow-xl",children:s.processing?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-5 w-5"}),a("placing_order")]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"mr-2 h-5 w-5"}),a("pay_now")," â€” ",g.toFixed(2)," ",a("currency_code")]})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-700 dark:bg-green-900/20 dark:text-green-400",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:a("secure_checkout")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-neutral-200/50 bg-white/50 p-3 dark:border-neutral-700/50 dark:bg-neutral-800/50",children:[e.jsx(p,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a("fast_delivery")})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-neutral-200/50 bg-white/50 p-3 dark:border-neutral-700/50 dark:bg-neutral-800/50",children:[e.jsx(p,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a("fresh_ingredients")})]})]})]})})]})}),s.processing&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 rounded-2xl bg-white p-8 shadow-2xl dark:bg-neutral-900",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-amber-200 border-t-amber-500"}),e.jsx(h,{className:"absolute left-1/2 top-1/2 h-6 w-6 -translate-x-1/2 -translate-y-1/2 text-amber-500"})]}),e.jsx("p",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:a("sending_burger_order")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("please_wait")})]})})]})})}export{me as default};
