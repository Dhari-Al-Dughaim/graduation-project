import{d as T,a as l,j as e,L as v,C}from"./app-CVM2PdW4.js";import{u as F,B as m}from"./use-locale-C8k2nL3Z.js";import{c as n,C as x,a as u,b as d,d as E}from"./card-DbqyGlU8.js";import{I as $}from"./input-D5gTYbkn.js";import{S as A}from"./spinner-wolbA-QX.js";import{a as P,P as q}from"./layout-DPt0zdO1.js";import{C as g}from"./clock-C1Xupbwq.js";import{C as z}from"./circle-alert-Cf4vIBX0.js";import{M as K}from"./map-pin-1aNiAcmh.js";import{T as _,C as M}from"./truck-CxAR92zR.js";import{C as R}from"./circle-x-CkLTEJtd.js";/* empty css            */import"./loader-circle-BF14CLwf.js";import"./language-switcher-CavnSgi-.js";import"./index-CXCPNMUL.js";import"./store-logo-BkJGVC1t.js";import"./index-qBq75qjq.js";const B=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],H=T("Search",B),w={pending:{icon:g,color:"text-yellow-600",bgColor:"bg-yellow-100 dark:bg-yellow-900/30"},confirmed:{icon:C,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30"},preparing:{icon:M,color:"text-cyan-700",bgColor:"bg-teal-100 dark:bg-teal-900/30"},ready:{icon:q,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30"},out_for_delivery:{icon:_,color:"text-indigo-600",bgColor:"bg-indigo-100 dark:bg-indigo-900/30"},delivered:{icon:C,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30"},cancelled:{icon:R,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30"}};function oe(){const{t:s,locale:p}=F(),[o,S]=l.useState(""),[h,b]=l.useState(!1),[f,c]=l.useState(null),[a,j]=l.useState(null),O=async r=>{r.preventDefault();const y=o.trim();if(y){b(!0),c(null),j(null);try{const i=await fetch("/track/search",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({order_number:y})}),k=await i.json();if(!i.ok){c(k.message||"Order not found");return}j(k.order)}catch{c("Failed to fetch order. Please try again.")}finally{b(!1)}}},L=r=>w[r]||w.pending,N=r=>r.meal?p==="ar"?r.meal.name_ar:r.meal.name_en:"Unknown Item",D=r=>new Date(r).toLocaleDateString(p==="ar"?"ar-KW":"en-KW",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),t=a?L(a.status):null,I=t?.icon||g;return e.jsx(P,{title:s("order_tracking"),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{className:"mx-auto max-w-md border-cyan-200/50 bg-white/80 backdrop-blur-sm dark:border-[#006b6d]/30 dark:bg-neutral-900/80",children:[e.jsx(x,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-[#00a0a3]"}),s("order_tracking")]})}),e.jsx("form",{onSubmit:O,children:e.jsxs(d,{className:"space-y-3",children:[e.jsx("label",{htmlFor:"order_id",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-200",children:"Order ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{id:"order_id",value:o,onChange:r=>S(r.target.value),placeholder:"e.g. ORD-5E7",className:"flex-1"}),e.jsx(m,{type:"submit",disabled:!o.trim()||h,children:h?e.jsx(A,{className:"h-4 w-4"}):"Track"})]}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Use the order number shown on your receipt or confirmation screen."})]})})]}),f&&e.jsx(n,{className:"mx-auto max-w-2xl border-red-200 bg-red-50/80 dark:border-red-800/30 dark:bg-red-900/20",children:e.jsxs(d,{className:"flex items-center gap-3 py-4",children:[e.jsx(z,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:f})]})}),a&&e.jsxs("div",{className:"mx-auto max-w-2xl space-y-4",children:[e.jsxs(n,{className:"overflow-hidden border-0 bg-gradient-to-r from-cyan-50 to-teal-50 shadow-lg dark:from-neutral-900 dark:to-neutral-800",children:[e.jsx(x,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(u,{className:"text-lg",children:["Order #",a.order_number]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:D(a.created_at)})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 rounded-full px-4 py-2 ${t?.bgColor}`,children:[e.jsx(I,{className:`h-5 w-5 ${t?.color}`}),e.jsx("span",{className:`text-sm font-semibold capitalize ${t?.color}`,children:a.delivery_tracking?.status||a.status.replace(/_/g," ")})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[a.delivery_tracking?.eta&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-white/60 p-3 dark:bg-neutral-800/60",children:[e.jsx(g,{className:"h-4 w-4 text-[#00a0a3]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Estimated Arrival"}),e.jsx("p",{className:"text-sm font-medium",children:a.delivery_tracking.eta})]})]}),a.delivery_tracking?.location&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-white/60 p-3 dark:bg-neutral-800/60",children:[e.jsx(K,{className:"h-4 w-4 text-[#00a0a3]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current Location"}),e.jsx("p",{className:"text-sm font-medium",children:a.delivery_tracking.location})]})]}),a.delivery_address&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-white/60 p-3 sm:col-span-2 dark:bg-neutral-800/60",children:[e.jsx(_,{className:"h-4 w-4 text-[#00a0a3]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery Address"}),e.jsxs("p",{className:"text-sm font-medium",children:[a.delivery_address,a.delivery_city&&`, ${a.delivery_city}`]})]})]})]})]})]}),e.jsxs(n,{className:"border-neutral-200/50 bg-white/80 backdrop-blur-sm dark:border-neutral-800 dark:bg-neutral-900/80",children:[e.jsx(x,{children:e.jsx(u,{className:"text-base",children:s("order_summary")})}),e.jsx(d,{className:"space-y-3",children:a.items.map(r=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-neutral-100 bg-neutral-50/50 p-3 dark:border-neutral-800 dark:bg-neutral-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r.meal?.image_url&&e.jsx("img",{src:r.meal.image_url,alt:N(r),className:"h-12 w-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:N(r)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{className:"inline-flex items-center rounded-full bg-cyan-100 px-2 py-0.5 font-medium text-[#006b6d] dark:bg-cyan-900/50 dark:text-cyan-300",children:["x",r.quantity]}),e.jsxs("span",{className:"ml-2",children:["@"," ",Number(r.unit_price).toFixed(2)," ",s("currency_code")]})]})]})]}),e.jsxs("p",{className:"text-sm font-semibold",children:[Number(r.total).toFixed(2)," ",s("currency_code")]})]},r.id))}),e.jsxs(E,{className:"flex flex-col gap-4 border-t pt-4",children:[e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:s("order_total")}),e.jsxs("span",{className:"text-lg font-bold text-[#00a0a3]",children:[Number(a.total).toFixed(2)," ",s("currency_code")]})]}),e.jsxs("div",{className:"flex w-full gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",asChild:!0,className:"flex-1",children:e.jsx(v,{href:`/orders/${a.id}/details`,children:"View Details"})}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,className:"flex-1",children:e.jsx(v,{href:`/orders/${a.id}/invoice`,children:s("invoice")})})]})]})]})]})]})})}export{oe as default};
