import{d as f,k as g,a as x,j as e}from"./app--zhXh8KA.js";import{u as j,B as y}from"./use-locale-CMHomARY.js";import{c as b,C as N,a as w,b as k,d as C}from"./card-CZzA8THX.js";import{S as _}from"./spinner-mSeJzNft.js";import{a as v}from"./layout-BgzWkNql.js";import{C as p}from"./credit-card-B_lms-5K.js";import{C as S}from"./circle-alert--UTgN6B7.js";/* empty css            */import"./loader-circle-CcEhb0s2.js";import"./language-switcher-vwaEqZd2.js";import"./index-Mu5klvrv.js";import"./store-logo-Br1XCtgH.js";import"./index-qBq75qjq.js";const F=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],T=f("ShieldCheck",F);function J({order:t}){const{t:a}=j(),u=g(),[l,r]=x.useState(!1),[o,n]=x.useState(null),h=async s=>{s.preventDefault(),r(!0),n(null);try{const i=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),m=await fetch("/api/upayment/payment",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":i||""},body:JSON.stringify({order_id:t.id})}),c=await m.json();m.ok&&c.paymentUrl?(u.clear(),window.location.href=c.paymentUrl):(n(c.message||a("payment_error")),r(!1))}catch{n(a("payment_error")),r(!1)}},d=Number(t.total);return e.jsx(v,{title:a("pay_now"),children:e.jsx("div",{className:"mx-auto max-w-lg",children:e.jsxs(b,{className:"overflow-hidden",children:[e.jsx(N,{className:"border-b bg-gradient-to-r from-cyan-50 to-teal-50 dark:from-neutral-900 dark:to-neutral-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#00a0a3] text-white",children:e.jsx(p,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx(w,{className:"text-lg",children:a("pay_now")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.order_number})]})]})}),e.jsxs(k,{className:"space-y-4 pt-6",children:[e.jsx("div",{className:"space-y-3",children:t.items?.map(s=>e.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-lg border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-700 dark:bg-neutral-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.meal?.image_url&&e.jsx("img",{src:s.meal.image_url,alt:s.meal?.name,className:"h-12 w-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.meal?.name??"Item"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["x",s.quantity]})]})]}),e.jsxs("span",{className:"font-medium",children:[(Number(s.unit_price)*s.quantity).toFixed(2)," ",a("currency_code")]})]},s.id))}),e.jsxs("div",{className:"flex items-center justify-between border-t pt-4 text-lg font-semibold",children:[e.jsx("span",{children:a("total")}),e.jsxs("span",{className:"text-[#00a0a3] dark:text-cyan-400",children:[d.toFixed(2)," ",a("currency_code")]})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-700 dark:bg-green-900/20 dark:text-green-400",children:[e.jsx(T,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:a("secure_payment_message")})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-700 dark:bg-red-900/20 dark:text-red-400",children:[e.jsx(S,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:o})]})]}),e.jsx(C,{className:"border-t bg-neutral-50 p-4 dark:bg-neutral-900",children:e.jsx("form",{onSubmit:h,className:"w-full",children:e.jsx(y,{type:"submit",size:"lg",disabled:l,className:"w-full bg-gradient-to-r from-[#00a0a3] to-cyan-600 font-semibold text-white hover:from-[#00a0a3] hover:to-cyan-700",children:l?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),a("redirecting_to_payment")]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),a("pay_now")," â€” ",d.toFixed(2)," ",a("currency_code")]})})})})]})})})}export{J as default};
